::ng-deep .student-marking-drawer {
  .p-drawer {
    .p-drawer-content {
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 0;
    }

    .p-drawer-header {
      padding: var(--padding-xl);
      border-bottom: 1px solid var(--neutral-grey-200);
      background-color: var(--neutral-white);

      .p-drawer-title {
        color: var(--primary-primary-900);
        font-size: var(--font-size-l);
        font-weight: var(--font-weight-bold);
      }
    }
  }

  .drawer-content {
    flex: 1;
    overflow-y: auto;
  }

  .upper-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--padding-l);
    margin-bottom: var(--padding-xl);

    .info-box {
      padding: var(--padding-xl);
      border: 1px solid var(--primary-primary-200);
      border-radius: var(--radius-m);
      background-color: var(--primary-primary-50);
      overflow: hidden;
      display: flex;
      gap: var(--padding-m);

      .box-title {
        padding-bottom: var(--padding-xxs);
        color: var(--primary-primary-900);
        font-size: var(--font-size-m);
        font-weight: var(--font-weight-bold);
      }

      .box-content {
        p {
          margin: 0;
          color: var(--primary-primary-900);
          font-size: var(--font-size-s);
          line-height: 1.5;
        }
      }
    }
  }

  .system-correction-summary {
    padding: var(--padding-m);
    border: 1px solid var(--neutral-grey-200);
    border-radius: var(--radius-xs);
    margin-bottom: var(--padding-l);

    .info-container {
      display: flex;
      flex-direction: column;
      gap: var(--padding-m);
      border-bottom: 1px solid var(--neutral-grey-100);
      margin-bottom: var(--padding-m);
      padding-bottom: var(--padding-m);

      .title {
        color: var(--primary-primary-900);
        font-size: var(--font-size-m);
        font-weight: var(--font-weight-bold);
      }
      .week-days {
        display: flex;
        gap: var(--padding-s);

        .day-container {
          padding: var(--padding-xxs);

          .day {
            color: var(--neutral-white);
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
          }
        }
      }
      .legends {
        display: flex;
        gap: var(--padding-m);

        .legend-container {
          display: flex;
          align-items: center;
          gap: var(--padding-xxs);

          .legend-indicator {
            width: 13px;
            height: 13px;
            border-radius: var(--radius-xxxl);
          }

          .legend-name {
            color: var(--primary-primary-900);
            font-size: var(--font-size-xs);
          }
        }
      }
    }

    .charts-boxes {
      display: flex;
      gap: var(--padding-m);

      .chart-box {
        display: flex;
        flex: 1;
        align-items: center;
        justify-content: space-between;
        gap: var(--padding-m);
        border-radius: var(--radius-m);
        padding: var(--padding-m);
        border: 1px solid var(--neutral-grey-200);

        .box {
          display: flex;
          flex-direction: column;
        }

        .percentage {
          display: flex;
          gap: var(--padding-xxs);

          .percentage-number {
            font-size: var(--font-size-question-h1);
            font-weight: var(--font-weight-bold);
          }
        }

                 .chart-title {
           font-size: var(--font-size-xs);
         }

         .chart-content {
           position: relative;
           width: 60px;
           height: 60px;
           display: flex;
           justify-content: center;
           align-items: center;

           .metric-chart {
             width: 100%;
             height: 100%;
           }
         }

        &.yellow {
          background-color: var(--secondery-secondery-100);
          border: 1px solid var(--colors-warning-orange-40);
          border-left: 10px solid var(--colors-warning-orange-40);

          .percentage-number,
          .chart-title {
            color: var(--colors-warning-orange-60);
          }
        }

        &.red {
          border-left: 10px solid var(--colors-negative-red-20);
          .percentage-number,
          .chart-title {
            color: var(--colors-negative-red-60);
          }
        }

        &.green {
          border-left: 10px solid #94C5A2;
          .percentage-number,
          .chart-title {
            color: #3b9255;
          }
        }
      }
    }
  }

  .lower-section {
    .marking-grid {
      background-color: var(--neutral-white);
      border-radius: var(--radius-m);
      overflow: hidden;

      .grid-header {
        display: grid;
        grid-template-columns: 0.4fr 1fr 1fr 1fr 1fr 1fr 0.5fr;
        margin-bottom: var(--padding-m);
        gap: var(--padding-m);

        .label-header,
        .criteria-header,
        .column-header {
          padding: var(--padding-xs);
          color: var(--primary-primary-900);
          font-size: var(--font-size-xs);
          font-weight: var(--font-weight-bold);
          display: flex;
          align-items: center;
          justify-content: center;
          text-align: center;
          border-radius: var(--radius-xs);
        }

        .criteria-header {
          grid-column: 2 / 7;
          justify-content: center;
          text-align: center;
          background-color: var(--neutral-grey-50);
        }

        .column-header {
          background-color: var(--neutral-grey-50);
        }

        .label-header {
          background-color: var(--neutral-white);
        }
      }

      .grid-row {
        display: grid;
        grid-template-columns: 0.4fr 1fr 1fr 1fr 1fr 1fr 0.5fr;
        gap: var(--padding-m);
        padding-bottom: var(--padding-m);
        min-height: 170px;

        &:last-child {
          border-bottom: none;
        }

        .label-cell,
        .criteria-cell,
        .mark-cell {
          display: flex;
          align-items: center;

          &:last-child {
            border-right: none;
          }
        }

        .label-cell {
          background-color: var(--neutral-grey-50);
          color: var(--primary-primary-900);
          font-size: var(--font-size-xs);
          font-weight: var(--font-weight-bold);
          justify-content: center;
          text-align: center;
          border-radius: var(--radius-xs);
        }

        .criteria-cell {
          color: var(--primary-primary-900);
          font-size: var(--font-size-xs);
          line-height: 1.4;
          text-align: center;
          justify-content: center;
          border: 1px solid var(--neutral-grey-100);
          border-radius: var(--radius-xs);
          padding: var(--padding-xs);
        }

        .mark-cell {
          justify-content: center;

          .add-mark-button {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--neutral-white);
            border: 1px solid var(--neutral-grey-600);
            border-radius: var(--radius-s);
            color: var(--neutral-grey-600);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-bold);
            cursor: pointer;
            transition: all 0.2s ease;
          }

          .mark-input {
            width: 100%;
            height: 100%;

            .p-inputnumber-input {
              width: 100%;
              height: 100%;
              text-align: center;
              border: 1px solid var(--neutral-grey-600);
              border-radius: var(--radius-s);
              padding: var(--padding-xs);
              font-size: var(--font-size-s);
              background-color: var(--neutral-white);

              &::placeholder {
                color: var(--neutral-grey-500);
              }

              &:focus {
                border-color: var(--neutral-grey-600);
              }
            }

            &.has-value .p-inputnumber-input {
              background-color: var(--primary-primary-50) !important;
              border-color: var(--neutral-grey-600) !important;
              color: var(--primary-primary-900) !important;
              font-weight: var(--font-weight-bold) !important;
              font-size: var(--font-size-s) !important;
            }
          }
        }
      }
    }
  }

  .drawer-footer {
    padding: var(--padding-xl) 0 var(--padding-xl);
    background-color: var(--neutral-white);

    .footer-buttons {
      display: flex;
      gap: var(--padding-m);
      justify-content: flex-end;

      .cancel-button {
        background-color: var(--neutral-grey-200);
        border-color: var(--neutral-grey-200);
        color: var(--primary-primary-900);
        font-size: var(--font-size-l) !important;
        padding: var(--padding-s) var(--padding-l);

        &:hover {
          background-color: var(--neutral-grey-300);
          border-color: var(--neutral-grey-300);
        }
      }

      .submit-button {
        background-color: var(--primary-primary-500);
        border-color: var(--primary-primary-500);
        color: var(--neutral-white);
        font-size: var(--font-size-l) !important;
        padding: var(--padding-s) var(--padding-l);

        &:hover {
          background-color: var(--primary-primary-600);
          border-color: var(--primary-primary-600);
        }
      }
    }
  }
}

// Additional responsive styles
@media (max-width: 1200px) {
  ::ng-deep .student-marking-drawer {
    .upper-section {
      grid-template-columns: 1fr;
    }

    .marking-grid {
      .grid-header,
      .grid-row {
        grid-template-columns: 1fr 0.8fr 0.8fr 0.8fr 0.8fr 0.8fr 0.6fr;
      }
    }
  }
}

@media (max-width: 768px) {
  ::ng-deep .student-marking-drawer {
    .drawer-content,
    .p-drawer-header,
    .drawer-footer {
      padding: var(--padding-m);
    }

    .marking-grid {
      .label-cell,
      .criteria-cell,
      .mark-cell {
        padding: var(--padding-s);
        font-size: var(--font-size-xs);
      }
    }
  }
}
