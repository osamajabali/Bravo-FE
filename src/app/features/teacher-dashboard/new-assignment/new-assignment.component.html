<div class="container new-assignment-container">
  <app-custom-steps
    [items]="items"
    [activeIndex]="activeStep"
    *ngIf="!isReviewPage"
  />
  @if (activeStep === 0) {
  <app-assignment-type-selector
    [(selectedAssignmentType)]="selectedAssignmentType"
  />
  } @if (activeStep === 1) {
  <app-assignment-setup [(assignmentInformation)]="assignmentInformation" />
  } @if (activeStep === 2 && selectedAssignmentType?.name === 'skills') {
  <app-assignment-domains-and-skills />
  } @if (activeStep === 2 && (selectedAssignmentType?.name ===
  'reading-comprehension' || selectedAssignmentType?.name === 'oral-reading')) {
  <app-assignment-book />
  } @if (activeStep === 2 && selectedAssignmentType?.name ===
  'listening-comprehension') {
  <app-listening-assignment-book />
  } @if(selectedAssignmentType?.name === 'skills' && isReviewPage) {
  <app-skills-review />
  }
</div>
<div class="assignment-footer" [ngClass]="activeStep === 0 ? 'center' : ''">
  <div>
    <button
      pButton
      type="button"
      label="Back"
      class="p-button-outlined"
      *ngIf="activeStep !== 0"
      (click)="back()"
    ></button>
  </div>
  <div class="d-flex gap-4">
    <button
      pButton
      type="button"
      label="Preview Assignment"
      class="p-button-outlined"
      *ngIf="activeStep !== 0"
      (click)="previewAssignment()"
    ></button>
    <button
      pButton
      type="button"
      label="Next"
      class="p-button-primary"
      (click)="next()"
      [disabled]="activeStep === 0 && !selectedAssignmentType"
      *ngIf="!isReviewPage"
    ></button>
    <button
      *ngIf="isReviewPage"
      pButton
      type="button"
      label="Submit"
      class="p-button-primary"
      (click)="submit()"
      [disabled]="activeStep === 0 && !selectedAssignmentType"
    ></button>
  </div>
</div>

<p-dialog
  [(visible)]="showSuccessDialog"
  [modal]="true"
  [style]="{ width: '450px' }"
  [draggable]="false"
  [resizable]="false"
  [closable]="true"
  [showHeader]="false"
  class="success-dialog"
>
  <div class="dialog-content">
    <img src="icon-check-circle.svg" alt="" />
    <div class="success-message">Assignment Submitted Successfully!</div>
    <div class="dialog-buttons">
      <button
        pButton
        type="button"
        label="Assignment Details"
        class="p-button-outlined"
        (click)="onAssignmentDetails()"
      ></button>
      <button
        pButton
        type="button"
        label="Confirm"
        class="p-button-primary"
        (click)="onConfirm()"
      ></button>
    </div>
  </div>
</p-dialog>
