.students {
  margin: 0 -15px;

  .header {
    padding: var(--padding-2xl) var(--padding-2xl) 0;
    margin-bottom: var(--padding-l);
    border-bottom: 1px solid var(--neutral-grey-200);
    background-color: var(--neutral-grey-50);

    .filter-by-date {
      font-size: var(--font-size-xxs);
      color: var(--primary-primary-900);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--padding-xs);
    }

    .tabs {
      display: flex;
      gap: var(--padding-m);

      .tab {
        padding: var(--padding-xl) var(--padding-xs) var(--padding-xs);
        text-align: center;
        color: var(--neutral-grey-500);
        font-size: var(--font-size-s);
        cursor: pointer;

        &.selected {
          color: var(--primary-primary-900);
          font-weight: var(--font-weight-bold);
          border-bottom: 2px solid var(--primary-primary-900);
        }
      }
    }

    .filters-container {
      display: flex;
      align-items: center;
      gap: var(--padding-m);

      .filter-button {
        font-size: var(--font-size-xxs) !important;
      }

      ::ng-deep {
        .p-datepicker {
          width: 120px !important;
          .p-inputtext {
            font-size: var(--font-size-xs);
            border: 1px solid var(--primary-primary-900);
            border-radius: var(--radius-s);
            background: transparent !important;
            padding: 6px 25px 6px 10px !important;

            &:focus {
              border-color: var(--primary-primary-500);
              box-shadow: 0 0 0 2px rgba(84, 200, 232, 0.2);
            }

            &::placeholder {
              color: var(--primary-primary-900);
              font-size: var(--font-size-xxs);
              font-weight: var(--font-weight-bold);
            }
          }
        }
      }
    }

    .buttons {
      display: flex;
      gap: var(--padding-s);

      .action-button {
        display: flex;
        align-items: center;
        gap: var(--padding-s);
        border-radius: 6px;
        border: 1px solid var(--primary-primary-900);
        color: var(--primary-primary-900);
        font-size: var(--font-size-xxs);
        font-weight: var(--font-weight-bold);

        &:disabled {
          border-color: var(--neutral-grey-400) !important;
          background: var(--neutral-grey-200) !important;
          color: var(--neutral-grey-400) !important;
        }

        &:hover {
          background-color: var(--primary-primary-100);
        }
      }
    }
  }

  .content {
    padding: var(--padding-l) var(--padding-2xl);

    .grid-header {
      display: grid;
      gap: var(--padding-m);
      padding: var(--padding-s);
      border-radius: var(--radius-m);

      .header-item {
        color: var(--neutral-grey-500);
        font-size: var(--font-size-xxs);
        display: flex;
        align-items: center;
        gap: var(--padding-s);

        img {
          cursor: pointer;
        }
      }

      &:has(.student-name) {
        grid-template-columns: 60px 2fr 1fr 1fr 1fr 1fr 1fr 1fr;
      }

      &:has(.group-name) {
        grid-template-columns: 60px 3fr 2fr 1fr;
      }

      .checkbox-column {
        justify-content: center;
      }
    }

    .students-list,
    .groups-list {
      display: flex;
      flex-direction: column;
      gap: var(--padding-m);

      .student-row,
      .group-row {
        display: grid;
        gap: var(--padding-m);
        padding: var(--padding-s) var(--padding-xs);
        border-radius: var(--radius-m);
        align-items: center;
        transition: all 0.2s ease-in-out;
        background-color: var(--neutral-white);
        border: 1px solid var(--neutral-grey-200);

        &:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
          background-color: var(--neutral-grey-50);
        }

        .action-icon {
          cursor: pointer;
        }

        .item {
          font-size: var(--font-size-xs);
          color: var(--primary-primary-900) !important;
          font-weight: var(--font-weight-bold);

          &.checkbox-column {
            display: flex;
            justify-content: center;
          }

          &.student-name {
            .student-info {
              display: flex;
              align-items: center;
              gap: var(--padding-s);

              .student-avatar {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                background-color: var(--primary-primary-500);
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--neutral-white);
                font-size: var(--font-size-xs);
                font-weight: var(--font-weight-bold);
                flex-shrink: 0;
              }

              .student-name-text {
                overflow: hidden;
                display: -webkit-box;
                -webkit-box-orient: vertical;
                -webkit-line-clamp: 2;
                line-clamp: 2;
              }
            }
          }

          &.group-name {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
            line-clamp: 2;
          }
        }
      }

      .student-row {
        grid-template-columns: 60px 2fr 1fr 1fr 1fr 1fr 1fr 1fr;
      }

      .group-row {
        grid-template-columns: 60px 3fr 2fr 1fr;
      }
    }
  }
}

/* Create Group Drawer Styles */

.drawer-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: var(--padding-l) var(--padding-l) 0;

  .title {
    margin: 0;
    color: var(--primary-primary-900);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-l);
  }
}

.create-group-drawer {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100%;

  .drawer-content {
    padding: var(--padding-l);
    overflow: auto;

    .form-field {
      margin-bottom: var(--padding-l);
      .field-label {
        display: block;
        margin-bottom: var(--padding-s);
        color: var(--neutral-black);
        font-weight: var(--font-weight-bold);
      }

      ::ng-deep .p-inputtext.w-100 {
        width: 100%;
      }
    }

    .students-section {
      .section-title {
        color: var(--neutral-black);
        font-weight: var(--font-weight-bold);
        margin-bottom: var(--padding-s);
      }

      .students-rows {
        display: flex;
        flex-direction: column;
        gap: var(--padding-s);
        margin-bottom: var(--padding-m);

        .student-row.selectable {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: var(--padding-s);
          border: 1px solid var(--neutral-grey-200);
          border-radius: var(--radius-xs);
          background-color: var(--neutral-white);

          .student-info {
            display: flex;
            align-items: center;
            gap: var(--padding-s);

            .student-avatar {
              width: 36px;
              height: 36px;
              border-radius: 50%;
              background-color: var(--primary-primary-500);
              display: flex;
              align-items: center;
              justify-content: center;
              color: var(--neutral-white);
              font-size: var(--font-size-xs);
              font-weight: var(--font-weight-bold);
              flex-shrink: 0;
            }
          }

          .trash-icon {
            cursor: pointer;
          }
        }
      }

      .add-student-btn {
        font-size: var(--font-size-xxs) !important;
        font-weight: var(--font-weight-bold);
      }
    }
  }

  .drawer-footer {
    padding: var(--padding-l);
    display: flex;
    justify-content: flex-end;
    gap: var(--padding-s);

    .p-button-primary,
    .p-button-outlined {
      font-size: var(--font-size-l) !important;
    }

    .p-button-primary {
      width: 209px !important;
    }
  }
}

::ng-deep {
  .p-checkbox {
    .p-checkbox-box {
      border: 1px solid var(--primary-primary-400);
      border-radius: var(--radius-s);

      &.p-highlight {
        background-color: var(--primary-primary-500);
        border-color: var(--primary-primary-500);
      }

      &:not(.p-disabled):hover {
        border-color: var(--primary-primary-500);
      }

      &:not(.p-disabled).p-focus {
        box-shadow: 0 0 0 2px var(--primary-primary-100);
      }
    }
  }

  .p-button {
    &.p-button-primary {
      background-color: var(--primary-primary-500);
      border-color: var(--primary-primary-500);
      font-size: var(--font-size-s) !important;

      &:hover {
        background-color: var(--primary-primary-600);
        border-color: var(--primary-primary-600);
      }
    }

    &.p-button-outlined {
      border-color: var(--primary-primary-900);
      color: var(--primary-primary-900);
      font-size: var(--font-size-s);

      &:hover {
        background-color: var(--primary-primary-50);
      }
    }
  }
}

/* Custom Checkbox Styles */
.custom-checkbox {
  position: relative;
  display: flex;
  align-items: center;

  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .checkbox-label {
    display: flex;
    align-items: center;
    cursor: pointer;
    user-select: none;
  }

  .checkbox-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    margin-inline-end: 12px;

    img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
  }

  .filter-option-label {
    font-size: 14px;
    color: var(--primary-primary-800);
  }
}

.picker-icon {
  position: absolute;
  top: 10px;
  right: 10px;
}

.confirm-delete-content {
  padding: var(--padding-m);
  text-align: center;
  font-size: var(--font-size-l);
  font-weight: var(--font-weight-bold);
  color: var(--primary-primary-900);
}

:host ::ng-deep .p-dialog-footer {
  display: flex;
  justify-content: center;
  gap: var(--padding-m);

  .p-button-primary,
  .p-button-outlined {
    font-size: var(--font-size-l) !important;
  }
}

.delete-icon {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: var(--padding-m);
}

/* Edit Profile Dialog Styles */
.edit-profile-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: var(--padding-l) 0;
  margin-bottom: var(--padding-s);

  .dialog-title {
    margin: 0;
    color: var(--primary-primary-900);
    font-weight: var(--font-weight-bold);
    font-size: var(--font-size-m);
  }

  .close-icon {
    cursor: pointer;
    width: 24px;
    height: 24px;
  }
}

.edit-profile-content {
  padding: var(--padding-l) 0;

  .tab-content {
    padding: var(--padding-m) 0;
  }

  .form-section {
    margin-bottom: var(--padding-5xl);

    .section-title {
      color: var(--primary-primary-900);
      font-weight: var(--font-weight-bold);
      font-size: var(--font-size-s);
      margin-bottom: var(--padding-m);
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--padding-m);
      margin-bottom: var(--padding-m);

      .form-field {
        .field-label {
          margin-bottom: var(--padding-s);
          color: var(--primary-primary-900);
          font-weight: var(--font-weight-bold);
          font-size: var(--font-size-xs);
        }

        ::ng-deep .p-inputtext {
          width: 100%;
          border: 1px solid var(--neutral-grey-200);
          border-radius: var(--radius-s);
          padding: var(--padding-s);
          font-size: var(--font-size-s);

          &:focus {
            border-color: var(--primary-primary-500);
            box-shadow: 0 0 0 2px rgba(84, 200, 232, 0.2);
          }

          &::placeholder {
            color: var(--neutral-grey-300);
          }
        }
      }
    }
  }

  .empty-tab-message {
    text-align: center;
    color: var(--neutral-grey-500);
    font-style: italic;
    padding: var(--padding-xl);
  }
}

.edit-profile-footer {
  display: flex;
  justify-content: flex-end !important;
  gap: var(--padding-s);
  padding: var(--padding-l) 0;
  width: 100%;

  .p-button-primary,
  .p-button-outlined {
    font-size: var(--font-size-l) !important;
    min-width: 100px;
  }

  .p-button-primary {
    min-width: 210px !important;
    font-weight: var(--font-weight-bold) !important;
  }
}

/* Edit Profile Dialog Tabs - Matching Main Page Tabs Design */
::ng-deep {
  .p-tabs {
    .p-tablist {
      border-bottom: 1px solid var(--neutral-grey-200);
      margin-bottom: var(--padding-l);

      .p-tab {
        background: transparent;
        border: none;
        color: var(--neutral-grey-500);
        font-size: var(--font-size-s);
        font-weight: var(--font-weight-regular);
        padding: var(--padding-xl) var(--padding-xs) var(--padding-xs);
        margin-right: var(--padding-m);
        border-radius: 0;
        cursor: pointer;
        transition: all 0.2s ease;

        &:hover {
          background-color: white;
        }

        &.p-tab-active {
          color: var(--primary-primary-900);
          font-weight: var(--font-weight-bold);
          border-bottom: 2px solid var(--primary-primary-900);
        }
      }
    }

    .p-tabview-panels {
      padding: 0;
    }
  }

  .user-information .p-password {
    margin-top: 0 !important;
    height: 50px !important;
  }
}

/* Certificate Template Drawer Styles */
.certificate-drawer {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  height: 100%;

  .drawer-content {
    padding: var(--padding-l);
    overflow: auto;
    flex: 1;

    .stepper-container {
      margin-bottom: var(--padding-2xl);
      display: flex;
      justify-content: center;

      .stepper {
        display: flex;
        align-items: center;
        gap: 0;

        .step {
          display: flex;
          align-items: center;
          position: relative;

          .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--primary-primary-600);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-primary-600);
            font-weight: var(--font-weight-bold);
            font-size: var(--font-size-xs);
            transition: all 0.3s ease;
            z-index: 2;
            position: relative;
          }

          .step-line {
            width: 80px;
            height: 1px;
            background-color: var(--primary-primary-900);
            transition: all 0.3s ease;
          }

          &.active {
            .step-circle {
              background-color: var(--primary-primary-600);
              border-color: var(--primary-primary-600);
              color: var(--neutral-white);
            }
          }

          &.completed {
            .step-circle {
              background-color: var(--primary-primary-400);
              border-color: var(--primary-primary-400);
              color: var(--neutral-white);
            }

            .step-line {
              background-color: var(--primary-primary-500);
            }
          }
        }
      }
    }

    .step-content {
      min-height: 400px;
      display: flex;

      .step-content-wrapper {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: var(--padding-4xl);

        .form-group {
          display: flex;
          flex-direction: column;
          gap: var(--padding-m);

          .control-title {
            color: var(--primary-primary-900);
            font-weight: var(--font-weight-bold);
            font-size: var(--font-size-s);
          }

          .radio-options {
            display: flex;
            gap: var(--padding-xl);

            .selection-box {
              display: flex;
              align-items: center;
              gap: var(--padding-s);
              padding: var(--padding-s) var(--padding-m);
              background-color: var(--neutral-grey-25);
              border: 1px solid var(--neutral-grey-100);
              border-radius: var(--radius-m);
              cursor: pointer;
              transition: all 0.2s ease;
              flex: 1;
              max-width: 400px;

              span {
                color: var(--primary-primary-900);
                font-size: var(--font-size-s);
                font-weight: var(--font-weight-bold);
              }

              &.selected {
                background-color: var(--primary-primary-50);
                border-color: var(--primary-primary-200);
              }

              ::ng-deep {
                .p-radiobutton {
                  .p-radiobutton-box {
                    border-color: var(--neutral-grey-200);
                    background-color: var(--neutral-grey-25);
                  }

                  &.p-radiobutton-checked {
                    .p-radiobutton-box {
                      background-color: var(--neutral-white);
                      border-color: var(--primary-primary-600);
                    }
                  }
                }
              }
            }
          }

          .template-scroll-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;

            .template-images {
              display: flex;
              gap: var(--padding-m);
              overflow-x: auto;
              padding: var(--padding-s) 0;
              width: 100%;
              scrollbar-width: none; /* Firefox */
              -ms-overflow-style: none; /* IE and Edge */

              /* Hide default scrollbar for webkit browsers */
              &::-webkit-scrollbar {
                display: none;
              }

              .template-item {
                flex-shrink: 0;
                cursor: pointer;
                border: 3px solid transparent;
                transition: all 0.3s ease;
                position: relative;
                margin: 20px 10px 0; /* Add margin to accommodate the check-circle */
                
                &.selected {
                  border-color: var(--primary-primary-400);
                  padding: 5px;
                }

                &:hover {
                  transform: translateY(-2px);
                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                }

                .check-circle {
                  position: absolute;
                  top: -15px;
                  right: -15px;
                  width: 37px;
                  height: 37px;
                  border-radius: 50%;
                  background-color: var(--primary-primary-400);
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  z-index: 2;
                }

                .template-image {
                  width: 200px;
                  height: 150px;
                  object-fit: cover;
                  border-radius: var(--radius-s);
                  display: block;
                }
              }
            }

            /* Custom scrollbar below images */
            .custom-scrollbar {
              width: 100%;
              max-width: 350px;
              height: 8px;
              background: var(--neutral-grey-100);
              border-radius: 4px;
              margin-top: var(--padding-s);
              position: relative;
              overflow: hidden;
              cursor: pointer;
              user-select: none;

              .scrollbar-thumb {
                height: 100%;
                background: var(--primary-primary-400);
                border-radius: 4px;
                transition: background-color 0.2s ease;
                cursor: grab;
                position: absolute;
                top: 0;
                user-select: none;

                &:hover {
                  background: var(--primary-primary-500);
                }

                &:active {
                  cursor: grabbing;
                  background: var(--primary-primary-600);
                }
              }
            }
          }

          .students-selection-container {
            .students-rows {
              display: flex;
              flex-direction: column;
              gap: var(--padding-s);

              .student-row.selectable {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: var(--padding-s);
                border: 1px solid var(--neutral-grey-200);
                border-radius: var(--radius-xs);
                background-color: var(--neutral-white);
                transition: all 0.2s ease;

                &:hover {
                  background-color: var(--neutral-grey-50);
                  border-color: var(--primary-primary-200);
                }

                .student-info {
                  display: flex;
                  align-items: center;
                  gap: var(--padding-s);

                  .student-avatar {
                    width: 36px;
                    height: 36px;
                    border-radius: 50%;
                    background-color: var(--primary-primary-500);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: var(--neutral-white);
                    font-size: var(--font-size-xs);
                    font-weight: var(--font-weight-bold);
                    flex-shrink: 0;
                  }

                  .student-name-text {
                    color: var(--primary-primary-900);
                    font-size: var(--font-size-s);
                    font-weight: var(--font-weight-bold);
                  }
                }
              }
            }
          }

          // Step 3 specific styles
          .form-row {
            display: flex;
            gap: var(--padding-m);
            margin-bottom: var(--padding-m);

            &.single-field {
              .form-field {
                flex: 1;
              }
            }

            &.two-fields {
              .form-field {
                flex: 1;
              }
            }

            .form-field {
              display: flex;
              flex-direction: column;
              gap: var(--padding-s);

              .field-label {
                color: var(--primary-primary-900);
                font-weight: var(--font-weight-bold);
                font-size: var(--font-size-s);
              }

              .full-width-input {
                width: 100%;
                border: 1px solid var(--neutral-grey-200);
                border-radius: var(--radius-s);
                padding: var(--padding-s);
                font-size: var(--font-size-s);

                &:focus {
                  border-color: var(--primary-primary-500);
                  box-shadow: 0 0 0 2px rgba(84, 200, 232, 0.2);
                  outline: none;
                }

                &::placeholder {
                  color: var(--neutral-grey-400);
                }
              }

              .date-picker-wrapper {
                position: relative;
                width: 100%;

                .datepicker-icon {
                  position: absolute;
                  top: 50%;
                  right: 10px;
                  transform: translateY(-50%);
                  pointer-events: none;
                  z-index: 1;
                }

                ::ng-deep {
                  .p-datepicker {
                    width: 100% !important;

                    .p-inputtext {
                      width: 100% !important;
                      border: 1px solid var(--neutral-grey-200);
                      border-radius: var(--radius-s);
                      padding: var(--padding-s);
                      font-size: var(--font-size-s);
                      padding-right: 40px !important;

                      &:focus {
                        border-color: var(--primary-primary-500);
                        box-shadow: 0 0 0 2px rgba(84, 200, 232, 0.2);
                      }

                      &::placeholder {
                        color: var(--neutral-grey-400);
                      }
                    }
                  }
                }
              }

              ::ng-deep {
                .p-dropdown {
                  width: 100% !important;
                  height: 50px !important;

                  .p-dropdown-label {
                    border: 1px solid var(--neutral-grey-200);
                    border-radius: var(--radius-s);
                    padding: var(--padding-s);
                    font-size: var(--font-size-s);

                    &.p-placeholder {
                      color: var(--neutral-grey-400);
                    }
                  }

                  &:not(.p-disabled).p-focus .p-dropdown-label {
                    border-color: var(--primary-primary-500);
                    box-shadow: 0 0 0 2px rgba(84, 200, 232, 0.2);
                  }

                  .p-dropdown-trigger {
                    border: 1px solid var(--neutral-grey-200);
                    border-left: none;
                    border-radius: 0 var(--radius-s) var(--radius-s) 0;
                  }
                }
              }
            }
          }
        }
      }
    }
  }

  .certificate-drawer-footer {
    padding: var(--padding-l);
    background-color: var(--primary-primary-50);
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: -25px;
    position: relative;
    z-index: 10;

    .p-button-primary,
    .p-button-outlined {
      font-size: var(--font-size-l) !important;
      min-width: 120px;
    }

    .p-button-primary {
      font-weight: var(--font-weight-bold) !important;
    }

    .p-button-outlined {
      &:disabled {
        border-color: var(--neutral-grey-300) !important;
        color: var(--neutral-grey-400) !important;
        background-color: transparent !important;
      }
    }
  }
}
