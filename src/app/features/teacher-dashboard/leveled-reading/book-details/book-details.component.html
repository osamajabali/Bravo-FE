<div class="book-details">
  <div class="header">
    <div class="buttons">
      <button
        pButton
        label=""
        class="p-button-outlined show-button"
      >
        <span>Quick Assignment</span>
      </button>
    </div>
  </div>
  <div class="upper-section">
    <div class="book-info">
      <div class="subject">Subject</div>
      <h1 class="title">{{ book.title }}</h1>
      <div class="summary">
        <div class="box outlined">
          <div class="d-flex justify-content-between items-center gap-4">
            <div class="text">Read</div>
            <div class="icon">
              <img src="icon-orange-bulb.svg" alt="arrow-right" />
            </div>
          </div>
          <div class="number">10</div>
        </div>
        <div class="box outlined">
          <div class="d-flex justify-content-between items-center gap-4">
            <div class="text">Question Solved</div>
            <div class="icon">
              <img src="icon-light-green-bulb.svg" alt="arrow-right" />
            </div>
          </div>
          <div class="number">10</div>
        </div>
        <div class="box outlined">
          <div class="d-flex justify-content-between items-center gap-4">
            <div class="text">Time Spent</div>
            <div class="icon">
              <img src="icon-sand-watch.svg" alt="arrow-right" />
            </div>
          </div>
          <div class="number">10</div>
        </div>
      </div>
      
    </div>
    <div class="book-cover">
      <img [src]="book.coverImage" [alt]="book.title" />
      <button
        pButton
        label="Read Now"
        class="p-button-primary read-button"
        (click)="readNow()"
      ></button>
    </div>
  </div>

  <div class="lower-section">
    <div class="tabs">
      <div
        class="tab"
        [class.selected]="activeTab === 'book-details'"
        (click)="activeTab = 'book-details'"
      >
        Book Details
      </div>
      <div
        class="tab"
        [class.selected]="activeTab === 'questions'"
        (click)="activeTab = 'questions'"
      >
        Questions
      </div>
      <div
        class="tab"
        [class.selected]="activeTab === 'comprehension-skills'"
        (click)="activeTab = 'comprehension-skills'"
      >
        Comprehension Skills
      </div>
    </div>

    <div class="tab-content">
      @switch (activeTab) { @case ('book-details') {
      <app-book-info />
      } @case ('questions') {
      <app-book-questions />
      } @case ('comprehension-skills') {
      <app-book-comprehension />
      } }
    </div>
  </div>
</div>

<p-dialog 
  [(visible)]="showReader" 
  [modal]="true" 
  [style]="{width: '60vw', height: '90vh'}"
  [draggable]="false"
  [resizable]="false"
  [closeOnEscape]="true"
  [showHeader]="false"
>
  <p-galleria 
    [value]="bookPages" 
    [showItemNavigators]="true"
    [showThumbnails]="false"
    [showIndicators]="false"
    [circular]="true"
    [responsiveOptions]="responsiveOptions"
    [containerStyle]="{ 'max-width': '700px', 'margin': 'auto' }"
    [(activeIndex)]="activeIndex"
  >
    <ng-template pTemplate="item" let-item>
      <img [src]="item.source" [alt]="item.alt" style="width: 100%; height: auto; max-height: 70vh; object-fit: contain;" />
    </ng-template>
    <ng-template pTemplate="indicator" let-index>
      <div class="custom-indicator" [class.active]="activeIndex === index">
        <span class="page-number">{{ index + 1 }}</span>
      </div>
    </ng-template>
    <ng-template pTemplate="previousitemicon">
      <img src="arrow-left-gray.svg" alt="">
    </ng-template>
    <ng-template pTemplate="nextitemicon">
      <i class="pi pi-chevron-right custom-nav-icon"></i>
    </ng-template>
  </p-galleria>
  <div class="book-title">{{ book.title }}</div>
</p-dialog>
